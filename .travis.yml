language: node_js
node_js: "node"

before_script:
  - mkdir -p ./test/assets
  - curl -L https://github.com/LeoWoerteler/QT3TS/archive/master.tar.gz | tar -xz -C ./test/assets
  - unzip -q test/assets/QT3TS-master/xqueryx.zip -d ./test/assets/QT3TS-master/

script:
    - timeout 600 xvfb-run -a npm run ci-test -- --reporter dot;
    - timeout 600 xvfb-run -a npm run ci-qt3tests -- --reporter dot;
    - timeout 600 xvfb-run -a npm run integrationtests -- --reporter dot;
    - timeout 600 xvfb-run -a npm run qt3tests -- --dist --reporter dot;
    - timeout 600 xvfb-run -a npm run qt3testsxqueryx -- --reporter dot;

after_success: npm run coverage
